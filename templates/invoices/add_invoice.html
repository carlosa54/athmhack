{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}
    <div class="container">
        <div class="jumbotron">
            <h2>Create a new Invoice</h2>
            {% if error %}
                <div class="alert alert-dismissable alert-danger">
                    <button type="button" class="close" data-dismiss="alert">×</button>
                    <strong>Oh snap!</strong> {{ errors }}
                </div>
            {% endif %}
            {% if success %}
                <div class="alert alert-dismissable alert-success">
                    <button type="button" class="close" data-dismiss="alert">×</button>
                   {{ success }}
                </div>
            {% endif %}
            <form method="post" action="{% url 'invoices' %}" class="form-horizontal"> {% csrf_token %}
                <div class="form-group">
                    <label for="client" class="col-sm-2 control-label">Client</label>
                    <div class="col-sm-8">
                        <select id="client" name="client" class="form-control">
                            {% for client in clients %}
                                <option value="{{ client.id }}">{{ client.full_name }} / {{ client.phone }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="items" class="col-sm-2 control-label">Items</label>
                    <div class="col-sm-3">
                        <select id="items" name="items" class="form-control">
                            {% for item in items %}
                                <option value="{{ item.id }}">{{ item.name }} ${{ item.price }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-sm-3">
                        <input id="quantity" class="form-control" type="text" name="quantity" placeholder="Quantity"/>
                    </div>
                    <div class="col-sm-2">
                        <a href="#" id="addItemButton" class="btn btn-primary btn-block">Add</a>
                    </div>
                </div>
                <div class="form-group">
                    <label for="items" class="col-sm-2 control-label">Items Added</label>
                    <div class="col-sm-8">
                        <table class="table table-bordered" id="itemsAdded">
                            <tr>
                                <th>Item ID</th>
                                <th>Item Name</th>
                                <th>Item Quantity</th>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-8">
                        <button type="submit" class="btn btn-primary btn-block">Send Invoice</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/addItem.js' %}"></script>
{% endblock %}